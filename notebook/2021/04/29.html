<!DOCTYPE html> <html> <head> <meta charset="utf-8"> <meta name="apple-mobile-web-app-capable" content="yes"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta name="viewport" content="width=device-width, initial-scale=1"> <title>ozan öğreden</title> <meta name="description" content=""> <meta name="keywords" content="Ozan Öğreden, personal homepage"> <meta name="HandheldFriendly" content="True"> <meta name="MobileOptimized" content="320"> <!-- Social: Facebook / Open Graph --> <meta property="og:type" content="article"> <meta property="article:author" content="Ozan Öğreden"> <meta property="article:section" content=""> <meta property="article:tag" content=""> <meta property="article:published_time" content="2021-04-29 00:00:00 +0200"> <meta property="og:url" content="https://ozan.ogreden.com/notebook/2021/04/29"> <meta property="og:title" content=""> <meta property="og:image" content="https://ozan.ogreden.com"> <meta property="og:description" content=""> <meta property="og:site_name" content="Ozan Öğreden"> <meta property="og:locale" content="en_US"> <!-- Social: Twitter --> <meta name="twitter:card" content="summary_large_image"> <meta name="twitter:site" content="ozanogred_en"> <meta name="twitter:title" content=""> <meta name="twitter:description" content=""> <meta name="twitter:image:src" content="https://ozan.ogreden.com"> <!-- Social: Google+ / Schema.org --> <meta itemprop="name" content=""> <meta itemprop="description" content=""> <meta itemprop="image" content="https://ozan.ogreden.com"> <!-- Canonical link tag --> <!-- <meta http-equiv="refresh" content="0; url=/notebook/2021/04/29"> <link rel="canonical" href="/notebook/2021/04/29"> --> <link rel="canonical" href="https://ozan.ogreden.com/notebook/2021/04/29"> <link rel="alternate" type="application/rss+xml" title="ozan öğreden" href="https://ozan.ogreden.com/feed.xml"> <!-- rel prev and next --> <link rel="stylesheet" href="/assets/css/main.css"> <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.css" /> <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3.0.0/es5/tex-mml-chtml.js"> </script> </head> <body> <main> <div id="header-container"> <header class="site-header"> <h1 id="header-title"> <a href="/">ozan öğreden</a> </h1> </header> <nav> <div style="padding-top: 1em"> <ul> <li> <a href="/cv">CV</a> </li> </ul> </div> </nav> </div> <article class="post-container" itemscope itemtype="http://schema.org/BlogPosting"> <!-- don't show titles on zettels --> <header class="post-header"> <p class="post-meta"><time datetime="2021-04-29T00:00:00+02:00" itemprop="datePublished">Apr 29, 2021</time></p> <h2 id="post-title" class="post-title" itemprop="name headline">What does that button do?</h1> </header> <div class="post-content" itemprop="articleBody"> <!-- --> <!-- <br> --> <p>At work, I get to click a button, wait 5 minutes and see my work deployed in either test, UAT or production environment. With almost no stress that something infrastructural can go wrong.</p> <p>Our DevOps team is telling us that we will have to think less about this process in near future.</p> <p>I am growing curious: What does that button do, exactly?</p> <p>Well, there are two buttons. One is “pressed” by a webhook from Github (I think?) and builds and stores a Docker image. The other then actually does the deployment.</p> <p>The container is built through this steps, noted down verbosely:</p> <ul> <li>Initialize job</li> <li>Pre-job <ul> <li>Download pgp dev</li> <li>Download pgp data</li> <li>Download sops file</li> <li>helm package</li> </ul> </li> <li>Checkout git repository</li> <li>Ensure PGP key installed</li> <li>Construct version number</li> <li>Fetch tags</li> <li>Set the Helm Chart version on on values-*.json</li> <li>Update dependencies <ul> <li>test [environment]</li> <li>uat [environment]</li> </ul> </li> <li>upload: Helm folder</li> <li>Clean Docker cache</li> <li>Docker login</li> <li>Generate Helm charts</li> <li>Download: helm charts</li> <li>Remove unnecessary files</li> <li>Override deployment</li> <li>Helm lint</li> <li>Helm package</li> <li>Build an image</li> <li>Push the image</li> <li>Push to chart museum</li> <li>Push to chart museum prod</li> <li>Publish artifact: environments</li> <li>Update patch numberin variable group</li> <li>Clean agent directories</li> <li>Post-job: <ul> <li>clean agent directories</li> <li>helm package</li> <li>Checkout gitrepository (??)</li> </ul> </li> </ul> <p>Then the deployment is done through these steps:</p> <ul> <li>Initialize job</li> <li>Pre-job <ul> <li>Download pgp dev</li> <li>Download pgp data</li> </ul> </li> <li>Download artifact - build - environments</li> <li>Download artifact - build - full-helm-chart</li> <li>Ensure PGP key installed</li> <li>Deploy</li> <li>Finalize job</li> </ul> </div> </article> </main> </body> </html>
